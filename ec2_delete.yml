- hosts: localhost
  connection: local
  gather_facts: False

  tasks:

    # - name: Provision a set of instances
    #   ec2:
    #      state: absent
    #      region: eu-west-1 
    #      wait: true

    #   register: ec2

    # Conditional example
    - name: Gather facts
      ec2_instance_facts:
        region: eu-west-1 
        filter: 
          "tag:Name": "{{ aws_ec2_name }}"
      register: ec2

    - name: Conditional
      debug:
        msg: "{{ ec2 }}"